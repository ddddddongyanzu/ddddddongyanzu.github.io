---
Layout: post
desc: 实战优课达APP
title:  实战优课达APP
tag:  study
---

## 实战优课达App

 ### <1> 移动端web开发

#### 1.1 认识meta

如果我们要做手机端上的页面（H5），除了用媒体查询进行小屏幕设备的适配，还需要设置一些特别的内容，比如页面是否允许用户缩放等。

这里我们需要用到`<head>`元素中的`<meta>`元素。

##### meta 元素

首先我们要注意，`<meta>`是一个自闭合元素，只有开始标签，没有结束标签。

对meta元素进行设置指的是通过标签属性进行设置。

<meta> 元素表示那些不能由其它HTML元相关元素表示的任何元数据信息（meta-information），比如页面是否允许用户缩放、比如针对搜索引擎和更新频度的描述和关键词等。

> 元数据：用来描述数据的数据。这么说可能不太好理解，没关系，大家只要知道 meta 在移动端开发中的作用就可以了。

下面是**youku首页的Meta设置**：

```html
<!-- 声明文档使用的字符编码 -->
<meta charset="utf-8">
<!-- http-equiv相当于http的文件头作用，它可以向浏览器传回一些有用的信息，以帮助浏览器正确地显示网页内容 -->
<!-- 与http-equiv对应的属性值为content，这里IE=edge告诉IE使用最新的引擎渲染网页 -->
<meta http-equiv="X-UA-Compatible" content="IE=Edge">
<!-- name属性主要用于描述网页，与之对应的属性值为content，content中的内容主要是便于搜索引擎机器人查找信息和分类信息用的 -->
<meta name="title" content="优酷-中国领先视频网站,提供视频播放,视频发布,视频搜索 - 优酷视频" />
<meta name="keywords" content="视频,视频分享,视频搜索,视频播放,优酷视频" />
<meta name="description" content="视频服务平台,提供视频播放,视频发布,视频搜索,视频分享" />
```

##### charset的属性：

- utf-8: HTML5的默认字符集为UTF-8，UTF-8 (Unicode) 涵盖了世界上几乎所有的字符和符号。

> 设置utf-8之后，就能识别中文了，你可以试着把在线编辑器的某个html中的这一行“”去掉，你会发现html中写到中文在右侧的预览浏览器中变成了乱码。

移动web前端meta的基础设置

在开发移动端页面时，我们需要设置meta标签如下：

```html
<!-- 设置移动端视图 -->
<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
```

viewport的属性：

- width : viewport的宽度
- height : viewport的高度（很少使用）
- initial-scale : 初始的缩放比例
- minimum-scale : 允许用户缩放到的最小比例
- maximum-scale : 允许用户缩放到的最大比例
- user-scalable : 用户是否可以手动缩放

上面的设置表示：H5页面窗口自动调整到设备宽度，并禁止用户缩放页面。

#### 1.2 认识新的单位 rem/em

在开发响应式页面时，同一个元素在不同的浏览器宽度下常常会设置不同的尺寸。

比如下面这个页面，在两种宽度下标题字体大小（font-size）和右上角logo大小时不同的（请忽略其他的尺寸变化）：

![img](https://document.youkeda.com/P3-3-HTML-CSS/1/2.jpg?x-oss-process=image/resize,w_800/watermark,image_d2F0ZXJtYXNrLnBuZz94LW9zcy1wcm9jZXNzPWltYWdlL3Jlc2l6ZSx3XzEwMA==,t_60,g_se,x_10,y_10)

要实现这个响应式布局，我们可以这样做：

```scss
// .title选中大标题“11 powerful examples of responsive web design”
// .logo选中右上角logo
@media screen and (max-width: 768px) {
  .title {
    font-size: 40px;
  }
  .logo {
    width: 160px;
    height: 160px;
  }
}
@media screen and (min-width: 768px) {
  .title {
    font-size: 50px;
  }
  .logo {
    width: 200px;
    height: 200px;
  }
}
```

之后如果需要新增一个断点，就需要新增一个媒体查询(@media)，并且需要把所有要调整的样式都写一遍，如果需要调整的样式有很多，那么工作量就会很大。

不过我们可以用css3中的单位rem来简化这个工作。

rem 是一个相对长度单位，而我们熟悉的px可以认为是一个绝对单位。在不同环境中，1rem可以转化为不同的px值。

那么rem这个单位和px有什么转换关系呢？

单位 rem 和 px 之间的转换：

使用rem作为单位时，rem和px之间的转换闭取决于页根元素（`<html></html>`）的字体大小，简单来说，1rem = 根元素的字体大小。

一般浏览器中根元素的字体默认大小为16px，有些情况下可能为其他大小。

拿上面的例子来说，假设现在浏览器的默认字体大小为16px，当浏览器宽度width <= 678px 时，标题的大小为 40px ，如果用 rem 表示应该是 2.5 rem （2.5*16 = 40px)。



```js
1rem = 16px;
2.5rem = 40px;
```

> 一般浏览器中根元素的字体默认大小为 16px，有些情况下可能为其他大小。最小显示字体一般为 10px，即设置10px以下的数值，比如 6px、8px 等是没有用的，显示的时候都会按照 10px 的大小进行显示，除非用到了css中的transform（这个另当别论）。

##### 单位 rem 的使用

知道了rem 和 px 之间的转换，我们就可以简化文章开头讲到的问题了：

```scss
// .title选中大标题“11 powerful examples of responsive web design”
// .logo选中右上角logo
@media screen and (max-width: 768px) {
  html {
    font-size: 16px;
  }
}
@media screen and (min-width: 768px) {
  html {
    font-size: 20px;
  }
}

.title {
  font-size: 2.5rem;
}
.logo {
  width: 10rem;
  height: 10rem;
}
```

这里我们用 rem 写标题的字体和 logo 的大小，然后通过媒体查询设置不同宽度下根元素（`<html></html>`）的字体大小，间接改变标题的字体大小和logo的大小，这样媒体查询里就只需要设置根元素的字体大小就可以了：

1. 浏览器宽度 <= 678px 时，根元素 font-size 设置为 16px，此时：

- 标题的字体大小为 2.5 * 16px = 40px；
- logo 的宽高为 10 * 16px = 160px；

2. 浏览器宽度 > 678px 时，根元素 font-size 设置为 20px，此时：

- 标题的字体大小为 2.5 * 20px = 50px；
- logo 的宽高为 10 * 20px = 200px；

除了 rem 外，还有个长得很像的单位要给大家介绍：em。

##### 单位：em

rem 是相对于根元素的字体大小转换的。em 则是根据父元素的字体大小转换的。

比如：

```html
<div class="parent">
  父元素中的文字
  <div class="child">
    子元素中的文字
  </div>
</div>
```

```css
.parent {
  // 父元素的字体大小为 20px
  font-size: 20px;

  > .child {
    // 子元素的字体大小为 0.7 * 20px = 14px
    font-size: 0.7em; 
    // 特别注意：子元素的宽度为 10 * 14px = 140px
    width: 10em;
  }
}
```



子元素的 em 转换分两种：

1. 子元素字体大小：0.7em

   这里的 1em 和 父元素的字体大小相同，为20px，故而子元素的字体大小为0.7 * 20px = 14px；

   

2. 子元素的宽度：10em
   这里的 1em 和 子元素的字体大小相同，为14px，故而子元素的宽度为10 * 14px = 140px；

**请大家特别注意上面的计算中子元素的宽度计算过程。**

> 既然上面两种情况下 1em 对于的 px 值不同，那要怎么理解“em 是根据父元素的字体大小转换的”这句话呢？其实，子元素中除了font-size属性外，其他属性计算的时候是根据子元素本身的字体大小计算的，但由于子元素本身的字体大小是根据父元素的字体大小计算的，所以可以认为 em 是根据父元素的字体大小转换的。

因为 em 是相对父元素字体大小进行计算的，所以这里就暴露了一个问题，如果在多层嵌套中使用 em，那么计算的时候就会产生级联反应，一旦嵌套过多，很容易计算出错：

```html
<div class="parent">
  父元素中的文字
  <div class="child">
    子元素中的文字
    <div class="grandchild">
      孙子元素中的文字
    </div>
  </div>
</div>
```

```css
.parent {
  // 父元素的字体大小为 20px
  font-size: 20px;

  > .child {
    // 子元素的字体大小为 0.7 * 20px = 14px
    font-size: 0.7em; 
    // 特别注意：子元素的宽度为 10 * 14px = 140px
    width: 10em;
    > .grandchild {
      // 孙子元素的字体大小为 2 * 14px = 28px
      font-size: 2em;
    }
  }
}
```

有些同学可能会以为孙子元素中的字体大小是2\*20px，但是其实应该是2\*14px = 28px。

#### 1.3 认识新的单位vw/vh

##### 单位vw 和 单位vh

vw 和 vh 也是相对长度单位。

- 1 vw  = 1/100 视口宽度；
- 1 vh  = 1/100 视口高度

视口（viewport） 就是指文档的可见部分，一图胜千言。

![img](https://document.youkeda.com/P3-3-HTML-CSS/1/3.jpg?x-oss-process=image/resize,w_800/watermark,image_d2F0ZXJtYXNrLnBuZz94LW9zcy1wcm9jZXNzPWltYWdlL3Jlc2l6ZSx3XzEwMA==,t_60,g_se,x_10,y_10)

那么有哪些地方可以用到这两个单位呢？

最容易想到的就是模态框(modal dialog)。

##### 模态框

模态框 （modal dialog): 通常指页面中弹出的窗口。像首次登录有课达官网的时候弹出的用户协议、用户信息完善弹框，都属于模态框。

![img](https://document.youkeda.com/P3-3-HTML-CSS/1/4.jpg?x-oss-process=image/resize,w_800/watermark,image_d2F0ZXJtYXNrLnBuZz94LW9zcy1wcm9jZXNzPWltYWdlL3Jlc2l6ZSx3XzEwMA==,t_60,g_se,x_10,y_10)

![img](https://document.youkeda.com/P3-3-HTML-CSS/1/6.jpg?x-oss-process=image/resize,w_800/watermark,image_d2F0ZXJtYXNrLnBuZz94LW9zcy1wcm9jZXNzPWltYWdlL3Jlc2l6ZSx3XzEwMA==,t_60,g_se,x_10,y_10)

模态框的半透明覆盖层的特征即大小覆盖整个视口，现在我们用vh和vw做上面“下载chrom浏览器”的模态框的半透明覆盖层：

1. 设置模态框蒙层的大小为视口大小：

```scss
// 将蒙层的宽高设置为视口的宽度和高度
width: 100vw;
height: 100vh;
```

1. 将模态框蒙层用 position:fixed 定位到浏览器左上角：

```scss
// 用定位把蒙层定位到浏览器的左上角
position: fixed;
top: 0;
left: 0;
```

点击播放上述代码：

代码演示

#####  QQ注册页

还记得在“Web前端基础”中做过的 QQ 注册页面吗？

它的左侧是一张“顶天立地”的大图，这个图的高度就是视口的高度。

它的右侧是表单部分，高度也是视口的高度。

当时我们是这样写的：

```html
<main class="main">
  <!-- 左侧图 -->
  <div class="bg"></div>
  <!-- 右侧表单 -->
  <div class="content"></div>
</main>
```

```css
html, body {
  height: 100%;
}

.main {
  height: 100%;
}

.bg {
  height: 100%;
}

.content {
  height: 100%;
}
```



因为“height: 100%;”是继承父元素高度的百分之一百，所以需要从源头的html元素开始，一路往下设置“height: 100%;”。

这就很不方便啦，这里我们用新单位 vh 来改写原来的代码：

代码演示



右侧预览用的浏览器窗口比较窄，请大家点击右上角的按钮![img](https://document.youkeda.com/P3-2-HTML-CSS/1.4/plus.png?x-oss-process=image/resize,w_800/watermark,image_d2F0ZXJtYXNrLnBuZz94LW9zcy1wcm9jZXNzPWltYWdlL3Jlc2l6ZSx3XzEwMA==,t_60,g_se,x_10,y_10)在新页面中查看效果。

### <2> 优课达app首页移动端实战开发（一）

#### 2.1 设计稿尺寸处理

在开始移动端实战开发之前，我们需要先做一些准备工作。

##### 设计稿尺寸处理

在实际的前端开发工作中，我们会根据设计稿来进行开发。而一般移动端设计稿是基于iphone6的尺寸制作的，因此设计稿宽度往往是750px。

现在的高清频设备像素比一般是2，比如iphone实际可视区域宽度是375px，但是能够显示750px。这句话大家可能不是很理解，这没关系，我们只要知道基于上面这个原因，我们在写样式代码的时候需要把设计稿的尺寸除以2才能使用。

但这样每个值都要计算后才能用，非常麻烦。

还在Sass允许我们自定义函数。

Sass自定义函数

自定义函数基础语法如下：

![img](https://document.youkeda.com/P3-3-HTML-CSS/2/4.jpg?x-oss-process=image/resize,w_800/watermark,image_d2F0ZXJtYXNrLnBuZz94LW9zcy1wcm9jZXNzPWltYWdlL3Jlc2l6ZSx3XzEwMA==,t_60,g_se,x_10,y_10)

我们可以用上面这个自定义函数统一处理设计稿上的尺寸，比如：

```scss
@function psd2px($px) {
  @return #{$px / 2}px;
}

.header {
  // 假设设计稿上高度是100px，那么函数参数就写100，计算后返回的值就是 50px
  height: psd2px(100);
}
```

设计稿上是100px，这里给自定义函数传入的参数就写100就可以了，这样就不需要自己计算了。

移动端的响应式布局尺寸处理

但这样返回的值仍是以px为单位的值，处于响应式布局的考虑，我们需要把传入的px值转换成一个rem单位的值。

1. 设置根元素的字体大小

由于1rem对应的px值是根据元素的字体大小进行计算的，所以这里我们先要确定根元素的字体大小：

```scss
html {
  font-size: 20px;
}
```

可能大家有疑问了，为什么我们要把根元素的字体大小设置为 20px ？

其实，为了方便计算设置为 10px 会更好一点，但是由于有些浏览器存在最小显示字体大小的限制（一般为 12px），所以这里将根元素的字体大小设置为 20px，总的来说就是为了方便计算。

> 最小显示字体大小：小于这个最小值的文字，按这个最小值显示。假设现在这个最小值为 12px，而你给某个段落设置了字体大小 8px，那么该段落的字体显示的大小不是你设置的 8px，而是 12px。

**2. 重写自定义函数**

```scss
html {
  font-size: 20px;
}

@function psd2px($px) {
  @return #{$px / 40}rem;
}
```

为什么返回语句中，传入的参数（即设计稿上的尺寸）要除以 40？这个 40 是如何计算得到的？

以设计稿宽度为 750px，设备像素比为 2 的情况来推算。

设计稿上的 100px 来推算：

首先，我们要显示的是 50px。所以 100px / 2。

其次，由于 1rem = 20px，所以 50px = 2.5rem。

所以这个函数传入 100(px)，返回的应该是 2.5rem，因此返回语句中的计算应为 #{$px / 40}rem。这里的 40 就是通过 100 / 2.5 计算得到的。

**特别注意**，如果设计稿宽度尺寸是 375px，那么返回语句中的计算应为 #{$px / 20}rem。

**3. 用媒体查询写响应式布局**

这里我们根据 iPhone 机型尺寸设置断点，由于 iPhone5 以前是 320px 宽，iPad 最小宽度是 768px，所以我们将断点设置为 320px 和 768px。

![img](https://document.youkeda.com/P3-3-HTML-CSS/2/3.jpg?x-oss-process=image/resize,w_800/watermark,image_d2F0ZXJtYXNrLnBuZz94LW9zcy1wcm9jZXNzPWltYWdlL3Jlc2l6ZSx3XzEwMA==,t_60,g_se,x_10,y_10)

320px 及以下为小型手机，320px ～ 768px 为常规手机和大屏手机，这里不做详细区分。媒体查询如下：

```scss
@function psd2px($px) {
  @return #{$px / 40}rem;
}

@media screen and (max-width: 768px) {
  html {
    font-size: 20px;
  }
}

// <= 320px 的情况下，根元素的字体大小等比例缩小
@media screen and (max-width: 320px) {
  html {
    font-size: 20px / 375 * 320;
  }
}
```

> 注意，用“max-width”写媒体查询，则大断点在上。

#### 2.2 固定头部

在这一章里我们要制作的是微博移动端里面的头部，如下图所示：

![img](https://document.youkeda.com/P3-3-HTML-CSS/2/2.jpg?x-oss-process=image/resize,w_800/watermark,image_d2F0ZXJtYXNrLnBuZz94LW9zcy1wcm9jZXNzPWltYWdlL3Jlc2l6ZSx3XzEwMA==,t_60,g_se,x_10,y_10)

头部分主导航和副导航：

![img](https://document.youkeda.com/P3-3-HTML-CSS/2/5.jpg?x-oss-process=image/resize,w_800/watermark,image_d2F0ZXJtYXNrLnBuZz94LW9zcy1wcm9jZXNzPWltYWdlL3Jlc2l6ZSx3XzEwMA==,t_60,g_se,x_10,y_10)

HTML如下：

```html
<header class="header">
  <!-- 主导航 -->
  <nav class="nav"></nav>

  <!-- 副导航 -->
  <div class="subnav"></div>
</header>
```

在这里我们先实现主导航：

1. 垂直方向

主导航部分垂直方向的分布需要注意下，从设计稿上可以发现，它里面的“关注”、“热门”、红包按钮和圆形加号按钮距离下边 8px，相机按钮距离下边 10px。

这种情况下，我们可以用 flex 布局的 align-items:flex-end 使其底部对齐，然后给相机按钮单独设置 2px 下外边距实现对齐。

1. 水平方向

主导航部分水平方向的分布比较难处理，“关注”和“热门”这两个标签是居中的，但是左右两侧的功能按钮并不对称，如果直接用 flex布局 的justify-content 属性，比较难调整，容易出现这种情况：

![img](https://document.youkeda.com/P3-3-HTML-CSS/2/9.jpg?x-oss-process=image/resize,w_800/watermark,image_d2F0ZXJtYXNrLnBuZz94LW9zcy1wcm9jZXNzPWltYWdlL3Jlc2l6ZSx3XzEwMA==,t_60,g_se,x_10,y_10)

解决方法：

**方法一：**通过一定方法使左右两侧的按钮宽度相同，这样可以通过 flex 的 justify-content: space-between 实现中间部分的居中：![img](https://document.youkeda.com/P3-3-HTML-CSS/2/6.jpg?x-oss-process=image/resize,w_800/watermark,image_d2F0ZXJtYXNrLnBuZz94LW9zcy1wcm9jZXNzPWltYWdlL3Jlc2l6ZSx3XzEwMA==,t_60,g_se,x_10,y_10)

**方法二：**通过一定方法使左右两侧的按钮宽度相同，给中间部分设置 flex:1，使其占满中间空间，然后让标签在中间空间中居中：![img](https://document.youkeda.com/P3-3-HTML-CSS/2/7.jpg?x-oss-process=image/resize,w_800/watermark,image_d2F0ZXJtYXNrLnBuZz94LW9zcy1wcm9jZXNzPWltYWdlL3Jlc2l6ZSx3XzEwMA==,t_60,g_se,x_10,y_10)

> 注意：等 Sass 文件编译完成后，请再次点击预览按钮查看效果哦。

Sass 文件中有些加了注释的地方，比较重要，请大家注意看它们的用法。都是比较常用的写法。

#### 2.3 横向滚动

现在我们来实现副导航：

副导航由可横向滚动的导航和右侧的按钮组成，由于按钮半透明，可以看到下面的滚动导航，故而用绝对定位将按钮定位到滚动导航到右边。

副导航横向滚动的实现：

![img](https://document.youkeda.com/P3-3-HTML-CSS/2/v-12.gif)

横向滚动我们可以使用overflow:scroll属性，但是这个属性在ios移动端有个问题，它的滚动是很卡的，不够顺滑。

所以我们还有加一个属性-webkit-overflow-scrolling:touch，这个属性可以解决ios上滚动卡顿的问题。

副导航右侧按钮的实现

首先使用绝对定位定位 position:absolute；定位它的位置。

但是这个时候可以看到它时透明的，和预期有差距：

![img](https://document.youkeda.com/P3-3-HTML-CSS/2/10.jpg?x-oss-process=image/resize,w_800/watermark,image_d2F0ZXJtYXNrLnBuZz94LW9zcy1wcm9jZXNzPWltYWdlL3Jlc2l6ZSx3XzEwMA==,t_60,g_se,x_10,y_10)

这里可以使用背景图+渐变色的方法实现：

```scss
.btn-addclass {
  background: url(./images/add.png) no-repeat center / px2rem(16) px2rem(16), linear-gradient(to right, rgba(#fff, 0.8), rgba(#fff, 0.8) 50%, #fff 50%);
}
```

注意：这里我们用逗号把背景图和渐变色连接起来了。

除了背景图和渐变色的连用，在background中我们还可以同时使用“纯色+渐变色”、“纯色+背景图”、多张背景图、“纯色+渐变色”等，大家有兴趣可以尝试一下。

将头部固定到页面上方位置

由于页面滚动的时候，头部导航条的位置时固定的：

![img](https://document.youkeda.com/P3-3-HTML-CSS/2/v-11.gif)

所以这里我们用position：fixed把导航条固定到头部；

到此为止，头部导航条我们就开发完了。



### <3> 优课达app首页移动端实战开发（二）

#### 3.1 消息布局分析

在这一章我们要制作的时微博页面里的一条微博，如下图所示：

![img](https://qgt-document.oss-cn-beijing.aliyuncs.com/P3-3-HTML-CSS/3/explain/1/%E4%BF%A1%E6%81%AF%E6%A8%A1%E5%9D%97.png?x-oss-process=image/resize,w_800/watermark,image_d2F0ZXJtYXNrLnBuZz94LW9zcy1wcm9jZXNzPWltYWdlL3Jlc2l6ZSx3XzEwMA==,t_60,g_se,x_10,y_10)

页面分析：

拿到页面我们首先可以将其中的一条微博划分为如下所示的布局，灰色的`content`以及白色的`padding`，并且呢可以发现，所有的微博都适用这种布局，不同的时`content`里面的内容。

![img](https://qgt-document.oss-cn-beijing.aliyuncs.com/P3-3-HTML-CSS/3/explain/1/%E8%A7%A3%E9%87%8Apadding.png?x-oss-process=image/resize,w_800/watermark,image_d2F0ZXJtYXNrLnBuZz94LW9zcy1wcm9jZXNzPWltYWdlL3Jlc2l6ZSx3XzEwMA==,t_60,g_se,x_10,y_10)

 经过分析，上图所示的`HTML`代码可以写成：

```html
<div class="container"></div>
```

但是为了能够更直观的看出这里的padding效果，我们暂时给

```html
<div class="container">
    <div class="content"></div>
</div>
```

##### 划分`content`区域

`padding`做好以后，接下来要分析`content`区域，`content`区域被划分为三部分，上、中、下，如下图所示：

![img](https://qgt-document.oss-cn-beijing.aliyuncs.com/P3-3-HTML-CSS/3/explain/1/%E7%BA%B5%E5%90%91%E9%A1%B5%E9%9D%A2%E5%88%92%E5%88%86.png?x-oss-process=image/resize,w_800/watermark,image_d2F0ZXJtYXNrLnBuZz94LW9zcy1wcm9jZXNzPWltYWdlL3Jlc2l6ZSx3XzEwMA==,t_60,g_se,x_10,y_10)

此时的`HTML`代码会在之前的基础上稍加改动，具体代码如下：

```html
<div class="container">
    <header></header>
    <main></main>
    <footer></footer>
</div>
```

下面我们通过完整的代码演示，查看页面效果：

代码演示

##### 实现关闭按钮

此时页面被我们划分的非常整齐，但是有一个关闭按钮却显得格格不入，如下图红色圆圈圈起来的部分所示：

![img](https://qgt-document.oss-cn-beijing.aliyuncs.com/P3-3-HTML-CSS/3/explain/1/%E5%85%B3%E9%97%AD%E6%8C%89%E9%92%AE.png?x-oss-process=image/resize,w_800/watermark,image_d2F0ZXJtYXNrLnBuZz94LW9zcy1wcm9jZXNzPWltYWdlL3Jlc2l6ZSx3XzEwMA==,t_60,g_se,x_10,y_10)

对于这种“不按常理”出现的模块，我们可以考虑使用定位来完成，具体实现方法我们可以在下面的代码演示中查看：

代码演示



至此，页面的粗略划分已经完成



#### 3.2 消息头部

接着我们会在上一节的基础上，选择`header`部分来完成，如下图中橙色区域所示的部分：

![img](https://qgt-document.oss-cn-beijing.aliyuncs.com/P3-3-HTML-CSS/3/explain/2/%E8%A7%A3%E9%87%8A-header.png?x-oss-process=image/resize,w_800/watermark,image_d2F0ZXJtYXNrLnBuZz94LW9zcy1wcm9jZXNzPWltYWdlL3Jlc2l6ZSx3XzEwMA==,t_60,g_se,x_10,y_10)



##### 头部左右布局

通过观察，首先可以将`header`部分划分为左侧博主信息部分和右侧关注部分，如下图橙色和黄色部分：

注意：

> 因为暂时我们还不清楚到底左右各占多宽，所以先平分为两等份

要将两个盒子水平分为左右两块，有两种方式，方式一：浮动，方式二：浮动：`flex`布局

因为浮动需要清除浮动，比较麻烦，所以我们选择`flex`布局。

##### 左侧详细布局

现在我们已经将`header`部分划分为左右两部分，然而这时候左侧的页面的划分还是不够清晰，还需要继续细分。

经过粗略的分析之后，可以将左侧划分为头像、文字两部分，并使用`flex`布局可以完成，如下图所示：

![img](https://qgt-document.oss-cn-beijing.aliyuncs.com/P3-3-HTML-CSS/3/explain/2/header%E5%B7%A6%E4%BE%A7%E7%BB%86%E5%88%86.png?x-oss-process=image/resize,w_800/watermark,image_d2F0ZXJtYXNrLnBuZz94LW9zcy1wcm9jZXNzPWltYWdlL3Jlc2l6ZSx3XzEwMA==,t_60,g_se,x_10,y_10)

将区域划分好以后，接下来我们的主要工作就是在布局内部填充内容。

**填充头像**

![img](https://qgt-document.oss-cn-beijing.aliyuncs.com/P3-3-HTML-CSS/3/explain/2/head-red-circle.png?x-oss-process=image/resize,w_800/watermark,image_d2F0ZXJtYXNrLnBuZz94LW9zcy1wcm9jZXNzPWltYWdlL3Jlc2l6ZSx3XzEwMA==,t_60,g_se,x_10,y_10)

观察上图所示的头像区域，可以将头像分为两部分，即头像、大V下面我们就来看一下具体的做法：
头像：可以使用背景图来做

```css
.box{
    background:url(XXX) no-repeat center;
    background-size: contain;
}
```

大V：使用背景图+定位，有两种方式

- 伪元素`::after`

```css
.head-icon::after{
    content: '';
        /* 别忘了父元素要相对定位 */
    position: absolute;
    top:26px;
    right:-2px;
    width: 14px;
    height:14px;
    background:url() no-repeat center;
    background-size: contain;
}
```

- 子元素

```html
<div class="head-icon">
    <div class="vip-icon"></div>
</div>
```

```css
.vip-icon{
    /* 别忘了父元素要相对定位 */
    position: absolute;
    top:26px;
    right:-2px;
    width: 14px;
    height:14px;
    background:url() no-repeat center;
    background-size: contain;
}
```



你可以选择任何一种自己喜欢的方式来填充头像，当然别忘了使用`border-radius`使头像变圆。

##### 昵称、称谓、微博头衔

接下来要完成的就是头像右侧的昵称、称谓、微博头衔部分了，如下图所示：

![img](https://qgt-document.oss-cn-beijing.aliyuncs.com/P3-3-HTML-CSS/3/explain/2/%E6%98%B5%E7%A7%B0%E7%A7%B0%E8%B0%93.png?x-oss-process=image/resize,w_800/watermark,image_d2F0ZXJtYXNrLnBuZz94LW9zcy1wcm9jZXNzPWltYWdlL3Jlc2l6ZSx3XzEwMA==,t_60,g_se,x_10,y_10)

根据设计稿，可以轻松的写出`HTML`代码，首先分上下结构，上下结构中的上部分为左右结构，代码如下：

```html
<div class="nick-sign">
    <!-- 上半部分--昵称和图标 -->
    <div>
        <span>触心话</span>
        <!-- 考虑到某博主可能会有多个图标所以用了列表 -->
        <ul>
            <li></li>
        </ul>
    <div>
    <p>知名情感博主</p>
</div>
```

接下来的工作就是使用`CSS`将相应的内容放置到各自的位置上：

1. `div`和`p`会因为它们本身块元素性质，会自然的形成上下布局
2. 给`div`设置`flex`布局，使`span`和`ul`在一行显示
3. 最好给`ul`也设置一个`flex`布局

最后我们通过代码演示来感受一下实现过程：

最后是右侧的关注按钮，如下图所示：

![img](https://qgt-document.oss-cn-beijing.aliyuncs.com/P3-3-HTML-CSS/3/explain/2/%E8%A7%A3%E9%87%8A-%E5%85%B3%E6%B3%A8.png?x-oss-process=image/resize,w_800/watermark,image_d2F0ZXJtYXNrLnBuZz94LW9zcy1wcm9jZXNzPWltYWdlL3Jlc2l6ZSx3XzEwMA==,t_60,g_se,x_10,y_10)

首先我们来看这段代码：

```css
section{

    &:nth-child(1){
        flex:1;
    }

    &:nth-child(2){
        flex:1;
    }
}
```

在最开始的时候，我们不知道“关注”区域的宽度，所以将`header`均分为两部分;

此刻要做的是，明确右侧“关注”部分的宽度，让左侧自适应，代码修改如下：

```css
section{

    &:nth-child(1){
        flex:1;
    }
    
    &:nth-child(2){
        /* 关注部分的宽度 */
        width: px2rem(60);
    }
}
```

最后在内部添加文字和加号图标即可：

#### 3.3 消息开发

这一节中我们要完成的是微博消息的中间部分，如下图高亮部分：

![img](https://qgt-document.oss-cn-beijing.aliyuncs.com/P3-3-HTML-CSS/3/explain/3/%E8%A7%A3%E9%87%8A%E5%BE%AE%E5%8D%9A%E5%86%85%E5%AE%B9.png?x-oss-process=image/resize,w_800/watermark,image_d2F0ZXJtYXNrLnBuZz94LW9zcy1wcm9jZXNzPWltYWdlL3Jlc2l6ZSx3XzEwMA==,t_60,g_se,x_10,y_10)

下面我们将页面拆分成上、中、下三个模块，如下图所示：

![img](https://qgt-document.oss-cn-beijing.aliyuncs.com/P3-3-HTML-CSS/3/explain/3/%E5%86%85%E5%AE%B9%E6%8B%86%E5%88%86%E4%B8%89%E9%83%A8%E5%88%86.png?x-oss-process=image/resize,w_800/watermark,image_d2F0ZXJtYXNrLnBuZz94LW9zcy1wcm9jZXNzPWltYWdlL3Jlc2l6ZSx3XzEwMA==,t_60,g_se,x_10,y_10)

接下来我们可以根据上图所示的模式，来写`HTML`代码：

```html
<!-- 顶部--标题 -->
<p>初秋的巴黎，与<span>@lexeander</span>诉说一场时装的故事</p>
<!-- 中部--图片 -->
<ul>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
</ul>
<!-- 底部--文字 -->
<div>
    <p>
        <!-- span用来添加图标 -->
        <span></span>
        触心话最新动态追踪
    </p>
    <p>183人发表了态度</p>
</div>
```

完成了`HTML`的基本骨架以后，接下来就是使用`css`调整位置、大小、颜色等，来实现最终效果。

##### 顶部标题

首先我们要修改的是顶部标题部分，如下图所示：

![img](https://qgt-document.oss-cn-beijing.aliyuncs.com/P3-3-HTML-CSS/3/explain/3/%E5%BE%AE%E5%8D%9A%E5%86%85%E5%AE%B9-%E9%A1%B6%E9%83%A8%E6%A0%87%E9%A2%98-%E9%AB%98%E4%BA%AE.png?x-oss-process=image/resize,w_800/watermark,image_d2F0ZXJtYXNrLnBuZz94LW9zcy1wcm9jZXNzPWltYWdlL3Jlc2l6ZSx3XzEwMA==,t_60,g_se,x_10,y_10)

这一部分的`HTML`代码在前文中已经给出，要实现最终效果可分为三步：

1. 调整文字的上下边距，建议通过给`p`标签添加上下`padding`
2. 在`p`标签上修改文本样式
3. 修改特殊文本`@lexeander`的字体颜色

##### 中间内容部分

中间部分是两行图片，如下图所示：

![img](https://qgt-document.oss-cn-beijing.aliyuncs.com/P3-3-HTML-CSS/3/explain/3/%E5%BE%AE%E5%8D%9A%E5%86%85%E5%AE%B9%E4%B8%AD%E9%97%B4%E9%AB%98%E4%BA%AE.png?x-oss-process=image/resize,w_800/watermark,image_d2F0ZXJtYXNrLnBuZz94LW9zcy1wcm9jZXNzPWltYWdlL3Jlc2l6ZSx3XzEwMA==,t_60,g_se,x_10,y_10)

通过观察发现，图片与图片之间的距离，大于图片和边界之间的距离，所以在这里我们不要贸然给每个图片添加一个`margin-right`，`margin-bottom`，你可以按照下面的方法去做：

首先给图片添加一个`margin`，如下图所示：

![img](https://qgt-document.oss-cn-beijing.aliyuncs.com/P3-3-HTML-CSS/3/explain/3/%E8%A7%A3%E9%87%8A--%E5%9B%BE%E7%89%87margin.png?x-oss-process=image/resize,w_800/watermark,image_d2F0ZXJtYXNrLnBuZz94LW9zcy1wcm9jZXNzPWltYWdlL3Jlc2l6ZSx3XzEwMA==,t_60,g_se,x_10,y_10)

接下来使用`flex`布局将多张图片拼接在一起，两张图片`margin`重叠的地方就会形成2倍的`margin`的距离，如下图所示：

![img](https://qgt-document.oss-cn-beijing.aliyuncs.com/P3-3-HTML-CSS/3/explain/3/%E8%A7%A3%E9%87%8A%E5%9B%BE%E7%89%87%E5%88%97%E8%A1%A8.png?x-oss-process=image/resize,w_800/watermark,image_d2F0ZXJtYXNrLnBuZz94LW9zcy1wcm9jZXNzPWltYWdlL3Jlc2l6ZSx3XzEwMA==,t_60,g_se,x_10,y_10)

##### 底部

如下图所示的底部布局，此时对我们来说就很简单了

![img](https://qgt-document.oss-cn-beijing.aliyuncs.com/P3-3-HTML-CSS/3/explain/3/%E5%BE%AE%E5%8D%9A%E5%86%85%E5%AE%B9%E5%BA%95%E9%83%A8%E9%AB%98%E4%BA%AE.png?x-oss-process=image/resize,w_800/watermark,image_d2F0ZXJtYXNrLnBuZz94LW9zcy1wcm9jZXNzPWltYWdlL3Jlc2l6ZSx3XzEwMA==,t_60,g_se,x_10,y_10)

可以使用`flex`布局当中的`space-between`使文字分布在左右两侧，然后使用`flex`布局使得"初心话最新动态追踪"文字和前面的图标在同一行显示，水平居中对齐。

#### 3.4 点赞/回复数开发

最后我们要实现的是微博点赞、恢复、转发数量部分的布局，如下图所示：

![img](https://qgt-document.oss-cn-beijing.aliyuncs.com/P3-3-HTML-CSS/3/explain/4/%E5%BE%AE%E5%8D%9A%E7%82%B9%E8%B5%9E%E5%9B%9E%E5%A4%8D%E8%BD%AC%E5%8F%91.png?x-oss-process=image/resize,w_800/watermark,image_d2F0ZXJtYXNrLnBuZz94LW9zcy1wcm9jZXNzPWltYWdlL3Jlc2l6ZSx3XzEwMA==,t_60,g_se,x_10,y_10)

首先将转发、恢复、点赞水平均分为三部分，如下图所示：

![img](https://qgt-document.oss-cn-beijing.aliyuncs.com/P3-3-HTML-CSS/3/explain/4/%E5%9B%9E%E5%A4%8D%E5%88%86%E5%8C%BA.png?x-oss-process=image/resize,w_800/watermark,image_d2F0ZXJtYXNrLnBuZz94LW9zcy1wcm9jZXNzPWltYWdlL3Jlc2l6ZSx3XzEwMA==,t_60,g_se,x_10,y_10)

这里可以使用`flex`布局中的`flex:1;`来划分，做法如下：

```html
<div class="container">
    <div></div>
    <div></div>
    <div></div>
</div>
```

```css
.container{
    display:flex;
    height:35px;
}

.container div{
    /* 均分为三等份 */
    flex:1;
}
```

然后给每个内部的`div`设置`flex`布局，使得`div`内部的元素水平居中即可。

### <4> 优课达app首页移动端实战开发(三)

#### 4.1 微博底部栏

本章节将完成微博页面的底部栏，底部栏的写法和顶部栏中的副导航很接近，主要使用了flex布局中的水平分布：

```css
justify-content: space-between;
```

但这里有个小细节要注意，底部栏第二个是个头像，这个头像的宽度和其他几项的宽度不同，这就会导致分布第三个项不能位于正中：

![img](https://document.youkeda.com/P3-3-HTML-CSS/4/1.jpg?x-oss-process=image/resize,w_800/watermark,image_d2F0ZXJtYXNrLnBuZz94LW9zcy1wcm9jZXNzPWltYWdlL3Jlc2l6ZSx3XzEwMA==,t_60,g_se,x_10,y_10)

处理方法在代码中写了，和之前头部一样，设置成等宽就可以了：

```scss
footer.footer {
  .item {
    // 将每一项的宽度设置为固定宽度
    // px2rem是处理尺寸的自定义函数
    width: px2rem(30);
  }
}
```
